<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>vtPhysX: </title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="online.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">PhysX for Virtools</a>&nbsp;&raquo&nbsp;<a class="el" href="buildingblocks.html">Building Blocks</a>&nbsp;&raquo&nbsp;<a class="el" href="joints.html">Joints</a>
  </div>
</div>
<div class="contents">
<p><br/>
 PJRevolute is categorized in <a class="el" href="joints.html">Joints</a> <br/>
 <br/>
See <a href="PJRevolute.cmo">PJRevolute.cmo</a>.</p>
<h3>Description</h3>
<p>Apply to a <a href="Documentation.chm::/beobjects/1_ck3dentity.html">3DEntity</a><br/>
 Creates or modifies a revolute joint. <br/>
 <br/>
 DOFs removed: 5<br/>
 DOFs remaining: 1<br/>
 <br/>
 </p>
<div align="center">
<img src="revoluteJoint.png" alt="revoluteJoint.png"/>
</div>
<p>A revolute joint removes all but a single rotational degree of freedom from two objects. The axis along which the two bodies may rotate is specified with a point and a direction vector. In theory, the point along the direction vector does not matter, but in practice, it should be near the area where the bodies are closest to improve simulation stability.</p>
<p>An example for a revolute joint is a door hinge. Another example would be using a revolute joint to attach rotating fan blades to a ceiling. The revolute joint could be motorized, causing the fan to rotate.</p>
<h3>Technical Information</h3>
<div align="center">
<img src="PJRevolute.png" alt="PJRevolute.png"/>
</div>
<p><span class="in">In: </span>triggers the process <br/>
 <span class="out">Out: </span>is activated when the process is completed. <br/>
 <br/>
 <span class="pin">Body B: </span>The second body. Leave blank to create a joint constraint with the world. <br/>
 <br/>
</p>
<p><span class="pin">Anchor:</span>A point in world space coordinates. See <a class="el" href="classp_joint_revolute.html#a6d8244184ba3cb113b784f226e444542" title="Sets the global anchor.">pJointRevolute::setGlobalAnchor()</a>. <br/>
 <span class="pin">Anchor Reference: </span>A helper entity to transform a local anchor into the world space. <br/>
</p>
<p><span class="pin">Axis: </span>An in world space. See <a class="el" href="classp_joint_revolute.html#a68bb96e78d29d3f415133081654ab66e" title="Sets the global axis.">pJointRevolute::setGlobalAxis()</a>. <br/>
 <span class="pin">Axis Up Reference: </span>A helper entity to transform a local axis into the world space. <br/>
 <br/>
 <hr/>
<p><span class="pin">Collision: </span>Enable Collision. See <a class="el" href="classp_joint_revolute.html#ac40d5959037929c931a81b4bc094dc76" title="Enables collision between both bodies.">pJointRevolute::enableCollision()</a>. <br/>
</p>
<hr/>
 <span class="pin">Projection Mode: </span>Joint projection mode. See pJointRevolute::setProjectionMode() and <a class="el" href="group___joints.html#ga635428fef8d6e4afba288610c9c65bd5">ProjectionMode</a>. <br/>
</p>
<p><span class="pin">Projection Distance: </span>If any joint projection is used, it is also necessary to set projectionDistance to a small value greater than zero. When the joint error is larger than projectionDistance the SDK will change it so that the joint error is equal to projectionDistance. Setting projectionDistance too small will introduce unwanted oscillations into the simulation.See pJointRevolute::setProjectionDistance(). <br/>
</p>
<p><span class="pin">Projection Angle: </span>Angle must be greater than 0.02f .If its smaller then current algo gets too close to a singularity. See pJointRevolute::setProjectionAngle(). <br/>
</p>
<hr/>
 <span class="pin">Spring: </span>Make it springy.See <a class="el" href="classp_joint_revolute.html#ab53c14c09e6dc035b0857a59504eadb0" title="Sets an optional spring.">pJointRevolute::setSpring()</a>. <br/>
</p>
<hr/>
 <span class="pin">High Limit: </span>Higher rotation limit around the rotation axis. See <a class="el" href="classp_joint_revolute.html#a78949f093964bab954fb13781575b188" title="Sets an optional high limit for angular motion of the joint.">pJointRevolute::setHighLimit()</a>. <br/>
</p>
<p><span class="pin">Low Limit: </span>Lower rotation limit around rotation axis. See <a class="el" href="classp_joint_revolute.html#acc8e91fbd89f33f4df02d9964d736120" title="Sets an optional high limit for angular motion of the joint.">pJointRevolute::setLowLimit()</a>. <br/>
</p>
<hr/>
 <span class="pin">Motor: </span>Motor parameters. See <a class="el" href="classp_joint_revolute.html#a8bb8e487de30fdbe53a4b6936e63e6c7" title="Sets a motor.">pJointRevolute::setMotor()</a>. <br/>
 <br/>
</p>
<hr/>
<p><span class="setting">Spring: </span>Enables parameter input for spring settings. <br/>
</p>
<p><span class="setting">High Limit: </span>Enables parameter inputs for angular limits. <br/>
</p>
<p><span class="setting">Motor: </span>Enables parameter input for motor settings. <br/>
</p>
<h4>Revolute Joint Limits</h4>
<p>A revolute joint allows limits to be placed on how far it rotates around the joint axis. For example, a hinge on a door cannot rotate through 360 degrees; rather, it can rotate between 20 degrees and 180 degrees. The angle of rotation is measured using the joints normal (axis orthogonal to the joints axis). This is the angle reported by NxRevoluteJoint::getAngle(). The limits are specified as a high and low limit, which must satisfy the condition -Pi &lt; low &lt; high &lt;Pi degrees. Below are valid revolute joint limits in which the joint is able to move between low and high:</p>
<div align="center">
<img src="revoluteJointLimits.png" alt="revoluteJointLimits.png"/>
</div>
<p> <br/>
</p>
<p>Note : The white region represents the allowable rotation for the joint.</p>
<h4>Limitations of Revolute Joint Limits</h4>
<p>As shown below, it is not possible to specify certain limit configurations without rotating the joint axes, due to the restrictions on the values of low and high: </p>
<div align="center">
<img src="revoluteLimitLimitation.png" alt="revoluteLimitLimitation.png"/>
</div>
<p>To achieve this configuration, it is necessary to rotate the joint counter-clockwise so that low is below the 180 degree line.</p>
<p>NOTE: If the angular region that is prohibited by the twist limit (as in the above figures) is very small, only a few degrees or so, then the joint may "push through" the limit and out on the other side if the relative angular velocity is large enough in relation to the time step. Care must be taken to make sure the limit is "thick" enough for the typical angular velocities it will be subjected to.</p>
<p><br/>
 </p>
<h3>Warning</h3>
<p>The body must be dynamic. <br/>
 <br/>
</p>
<h3>VSL : Creation </h3>
<p><br/>
 <span class="NiceCode"> </p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> main()
{
    <a class="code" href="class_physic_manager.html" title="PhysicManager is a Virtools manager and acts as singleton object.">PhysicManager</a> pm = GetPhysicManager();
    <a class="code" href="classp_factory.html" title="Singleton class to create physic objects.">pFactory</a> pf  = getPFactory();
    
        
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyA = pm.getBody(bodyARef);
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyB = pm.getBody(bodyBRef);

    <span class="comment">//sanity check : </span>
    <span class="keywordflow">if</span>(!bodyA &amp;&amp; !bodyB )
        <span class="keywordflow">return</span>;

    <a class="code" href="classp_world.html" title="Class to maintain physical objects.">pWorld</a> w  = null;
    
    <span class="comment">//bodyARef or bodyBRef can be zero. This creates a revolute constraint with the environment then.</span>
    <span class="comment">//However, we need a valid world object : </span>
    <span class="keywordflow">if</span>(bodyA)
    {
        w = bodyA.getWorld();
    }
    
    <span class="keywordflow">if</span>(bodyB)
    {
        w = bodyB.getWorld();
    }
    

    <span class="comment">//we ask the world whether a joint revolute exists already amongst the both bodies : </span>
    <a class="code" href="classp_joint.html" title="Abstract base class for the different types of joints.">pJoint</a> joint  = w.getJoint(bodyARef,bodyBRef,<a class="code" href="group___joints.html#ggadcea5be96146723d822b7db05024d881a37ee076a40104ad3394dbb49468a8e46">JT_Revolute</a>);

    <a class="code" href="classp_joint_revolute.html" title="A joint which behaves in a similar way to a hinge or axle.">pJointRevolute</a> revoluteJoint = null;
    <span class="keywordflow">if</span>(!joint)
    {
        Vector globalAnchor  = anchor;
        <span class="keywordflow">if</span>(anchorReference)
            anchorReference.Transform(globalAnchor,anchor);
            
        Vector globalAxis  = axis;
        <span class="keywordflow">if</span> (axisReference)
        {
            Vector dir;
            Vector up;
            Vector right;
            axisReference.GetOrientation(dir,up,right);
            axisReference.TransformVector(globalAxis,up);
            
        }       
        revoluteJoint= pf.createRevoluteJoint(bodyARef,bodyBRef,globalAnchor,globalAxis);
        
        <span class="keywordflow">if</span>(revoluteJoint)
            revoluteJoint.<a class="code" href="classp_joint_revolute.html#ac40d5959037929c931a81b4bc094dc76" title="Enables collision between both bodies.">enableCollision</a>(collision);
            
    }
    
}
</pre></div><p> </span> <br/>
</p>
<h3>VSL : Limit Modification </h3>
<p><br/>
 <span class="NiceCode"> </p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> main()
{
    <a class="code" href="class_physic_manager.html" title="PhysicManager is a Virtools manager and acts as singleton object.">PhysicManager</a> pm = GetPhysicManager();
    <a class="code" href="classp_factory.html" title="Singleton class to create physic objects.">pFactory</a> pf  = getPFactory();
    
        
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyA = pm.getBody(bodyARef);
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyB = pm.getBody(bodyBRef);


    <span class="comment">//sanity check : </span>
    <span class="keywordflow">if</span>(!bodyA &amp;&amp; !bodyB )
        <span class="keywordflow">return</span>;

    <a class="code" href="classp_world.html" title="Class to maintain physical objects.">pWorld</a> w  = null;
    
    <span class="comment">//bodyARef or bodyBRef can be zero. This creates a revolute constraint with the environment then.</span>
    <span class="comment">//However, we need a valid world object : </span>
    <span class="keywordflow">if</span>(bodyA)
    {
        w = bodyA.getWorld();
    }
    
    <span class="keywordflow">if</span>(bodyB)
    {
        w = bodyB.getWorld();
    }
    

    <span class="comment">//we retrieve a joint object : </span>
    <a class="code" href="classp_joint.html" title="Abstract base class for the different types of joints.">pJoint</a> joint  = w.getJoint(bodyARef,bodyBRef,<a class="code" href="group___joints.html#ggadcea5be96146723d822b7db05024d881a37ee076a40104ad3394dbb49468a8e46">JT_Revolute</a>);
    <span class="keywordflow">if</span>(!joint)
    <span class="keywordflow">return</span>;
    

    <span class="comment">//Virtools is not providing simple downcasts : </span>
    <a class="code" href="classp_joint_revolute.html" title="A joint which behaves in a similar way to a hinge or axle.">pJointRevolute</a> revJoint = joint.castRevolute();
    <span class="keywordflow">if</span>(!revJoint)
    <span class="keywordflow">return</span>;
    <span class="comment"></span>
<span class="comment">    //////////////////////////////////////////////////////</span>
<span class="comment"></span>    <span class="comment">//</span>
    <span class="comment">//</span>
    <span class="comment">//      Limit High : </span>
    <span class="comment">//</span>
    <span class="comment">//</span>
    <a class="code" href="classp_joint_limit.html" title="Describes a joint limit. pJointLimit is registered as custom structure pJLimit and...">pJointLimit</a> hLimit;

    hLimit.<a class="code" href="classp_joint_limit.html#af144874fe67f575db467873955a16624">value</a> = limitHigh;
    
    revJoint.<a class="code" href="classp_joint_revolute.html#a78949f093964bab954fb13781575b188" title="Sets an optional high limit for angular motion of the joint.">setHighLimit</a>(hLimit);
    <span class="comment"></span>
<span class="comment">    //////////////////////////////////////////////////////</span>
<span class="comment"></span>    <span class="comment">//</span>
    <span class="comment">//</span>
    <span class="comment">//      Limit Low : </span>
    <span class="comment">//</span>
    <span class="comment">//</span>
    <a class="code" href="classp_joint_limit.html" title="Describes a joint limit. pJointLimit is registered as custom structure pJLimit and...">pJointLimit</a> lLimit;

    lLimit.<a class="code" href="classp_joint_limit.html#af144874fe67f575db467873955a16624">value</a> = pi / 180.0f * limitLow;
    
    revJoint.<a class="code" href="classp_joint_revolute.html#acc8e91fbd89f33f4df02d9964d736120" title="Sets an optional high limit for angular motion of the joint.">setLowLimit</a>(lLimit);
            
}
</pre></div><p> </span> <br/>
</p>
<h3>VSL : Motor Modification </h3>
<p><br/>
 <span class="NiceCode"> </p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> main()
{
    <a class="code" href="class_physic_manager.html" title="PhysicManager is a Virtools manager and acts as singleton object.">PhysicManager</a> pm = GetPhysicManager();
    <a class="code" href="classp_factory.html" title="Singleton class to create physic objects.">pFactory</a> pf  = getPFactory();
    
        
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyA = pm.getBody(bodyARef);
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyB = pm.getBody(bodyBRef);


    <span class="comment">//sanity check : </span>
    <span class="keywordflow">if</span>(!bodyA &amp;&amp; !bodyB )
        <span class="keywordflow">return</span>;

    <a class="code" href="classp_world.html" title="Class to maintain physical objects.">pWorld</a> w  = null;
    
    <span class="comment">//bodyARef or bodyBRef can be zero. This creates a revolute constraint with the environment then.</span>
    <span class="comment">//However, we need a valid world object : </span>
    <span class="keywordflow">if</span>(bodyA)
    {
        w = bodyA.getWorld();
    }
    
    <span class="keywordflow">if</span>(bodyB)
    {
        w = bodyB.getWorld();
    }
    

    <span class="comment">//we retrieve a joint object : </span>
    <a class="code" href="classp_joint.html" title="Abstract base class for the different types of joints.">pJoint</a> joint  = w.getJoint(bodyARef,bodyBRef,<a class="code" href="group___joints.html#ggadcea5be96146723d822b7db05024d881a37ee076a40104ad3394dbb49468a8e46">JT_Revolute</a>);
    <span class="keywordflow">if</span>(!joint)
    <span class="keywordflow">return</span>;
    

    <span class="comment">//Virtools is not providing simple downcasts : </span>
    <a class="code" href="classp_joint_revolute.html" title="A joint which behaves in a similar way to a hinge or axle.">pJointRevolute</a> revJoint = joint.castRevolute();
    <span class="keywordflow">if</span>(!revJoint)
    <span class="keywordflow">return</span>;
    
    <span class="comment"></span>
<span class="comment">    //////////////////////////////////////////////////////</span>
<span class="comment"></span>    <span class="comment">//</span>
    <span class="comment">//</span>
    <span class="comment">//      Motor : </span>
    <span class="comment">//</span>
    <span class="comment">//</span>
    <a class="code" href="classp_motor.html" title="Describes a joint motor. Some joints can be motorized, this allows them to apply...">pMotor</a> motor;
    motor.<a class="code" href="classp_motor.html#ae06ad06616e656494e3762d3e20bdea3">targetVelocity</a> = motorTargetVelocity;
    motor.<a class="code" href="classp_motor.html#a1825dc0273363c1382e33cb674d6956f">maximumForce</a> = 100.0f;
    revJoint.<a class="code" href="classp_joint_revolute.html#a8bb8e487de30fdbe53a4b6936e63e6c7" title="Sets a motor.">setMotor</a>(motor);
        
            
}
</pre></div><p> </span> <br/>
 <br/>
 <br/>
</p>
<p>Is utilizing <a class="el" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> <a class="el" href="classp_world.html" title="Class to maintain physical objects.">pWorld</a> <a class="el" href="class_physic_manager.html" title="PhysicManager is a Virtools manager and acts as singleton object.">PhysicManager</a> pFactory::createJointRevolute().<br/>
 </p>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Feb 3 18:57:23 2010 for vtPhysX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
