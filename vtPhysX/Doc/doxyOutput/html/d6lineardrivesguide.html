<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>vtPhysX: Linear Drives</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="online.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">PhysX for Virtools</a>&nbsp;&raquo&nbsp;<a class="el" href="guide.html">Guide</a>&nbsp;&raquo&nbsp;<a class="el" href="joint.html">Joint</a>&nbsp;&raquo&nbsp;<a class="el" href="d6joints.html">6DOF Joints</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="D6LinearDrivesGuide">Linear Drives </a></h1><h3>Linear Drives</h3>
<p>A joint with a single linear DOF, i.e. a slider or prismatic joint, has an obvious coordinate to drive; its linear extension is represented by a single Cartesian coordinate - x, y or z. Each linear DOF that is not locked can be driven by its Cartesian coordinate so multi-DOF linear joints are easily understood as multiple 1DOF joints. Drive velocities are the rate of change of the Cartesian coordinates. NOTE: Angular Drive is more involved, so be sure to understand the linear drive model before progressing to angular drive.</p>
<p><b>Linear Drive Model</b><br/>
</p>
<p>The linear drive model for the d6joint consists of the following parameters:</p>
<p>Drive targets are specified in relation to the parent actor's (body[0]) frame using the following members of a D6:</p>
<ul>
<li>drivePosition - a vector representing a target position.</li>
<li>driveLinearVelocity - a vector representing the target velocity.</li>
</ul>
<p>Separate drive descriptors for x (xDrive), y (yDrive) and z (zDrive) can be specified using these D6 members :</p>
<ul>
<li>driveType - used to apply a type of drive with the following flags:<ul>
<li>D6DT_Position - Enable drive to a positional goal.</li>
<li>D6DT_Velocity - Enable drive to a velocity goal.</li>
</ul>
</li>
</ul>
<ul>
<li>spring - amount of force needed to move the joint to its target position proportional to the distance from the target (not used for a velocity drive).</li>
<li>damping - applied to the drive spring (used to smooth out oscillations about the drive target).</li>
<li>forceLimit - maximum force applied when driving towards a velocity target (not used for a positional drive).</li>
</ul>
<p>Position drive attempts to follow the desired position input with the configured stiffness and damping properties. A physical lag due to the inertia of the driven body acting through the drive spring will occur; therefore, sudden step changes will result over a number of time steps.</p>
<p>Physical lag can be reduced by stiffening the spring. Another way to control the lag is to apply a velocity target in addition to a positional target.</p>
<p>With a fixed position input, a position drive will spring about that drive position with the specified springing/damping characteristics. Adding a velocity drive in this case will deflect the drive from the desired position, just as an external force stretches the spring.</p>
<p>In addition to specifying drive targets through the joint descriptor, the d6joint provides methods to update the targets only, as shown below:</p>
<ul>
<li><a class="el" href="classp_joint_d6.html#a805bde5623512826383c6f3c6524920e" title="If the type of xDrive (yDrive,zDrive) is D6DT_Position, drivePosition defines the...">pJointD6::setDrivePosition()</a></li>
<li><a class="el" href="classp_joint_d6.html#a6666defe4434fea035ce3a451c249967" title="If the type of swingDrive or twistDrive is D6DT_Position, driveOrientation defines...">pJointD6::setDriveRotation()</a>;</li>
<li><a class="el" href="classp_joint_d6.html#a807d910282b130c06d5a2cdfc8af6060" title="If the type of xDrive (yDrive,zDrive) is D6DT_Velocity, driveLinearVelocity defines...">pJointD6::setDriveLinearVelocity()</a>;</li>
<li><a class="el" href="classp_joint_d6.html#aa817dd4449972ff438af208b9e575636" title="If the type of swingDrive or twistDrive is D6DT_Velocity, driveAngularVelocity defines...">pJointD6::setDriveAngularVelocity()</a>;</li>
</ul>
<p><em><b>Example</b></em></p>
<p><span class="NiceCode"> </p>
<div class="fragment"><pre class="fragment"><a class="code" href="classp_joint.html" title="Abstract base class for the different types of joints.">pJoint</a> joint  = w.getJoint(a,b,<a class="code" href="group___joints.html#ggadcea5be96146723d822b7db05024d881a123db491acc937b6eb6c77531bef6552">JT_D6</a>);
<span class="keywordflow">if</span>(joint)
{
    
    <a class="code" href="classp_joint_d6.html" title="A D6 joint is a general constraint between two actors.">pJointD6</a> d6 = joint.castD6Joint();
    
    d6.<a class="code" href="classp_joint_d6.html#a17ddf13c71611b2230c62650e199c021" title="Sets the motion mode for the linear x axis.">setXMotionMode</a>(<a class="code" href="group___d6.html#gga78bd37a3243af04c0ef86a19ffd70e88ab01e9c612e88a93f12fa57af51b10d53">D6MM_Free</a>);
    d6.<a class="code" href="classp_joint_d6.html#a970054559a0c0db900fd975bf5d61a4b" title="Sets the motion mode for the linear y axis.">setYMotionMode</a>(<a class="code" href="group___d6.html#gga78bd37a3243af04c0ef86a19ffd70e88ab01e9c612e88a93f12fa57af51b10d53">D6MM_Free</a>);
    d6.<a class="code" href="classp_joint_d6.html#a5208f96c3a88d8a38d71a4f027a879e1" title="Sets the motion mode for the linear z axis.">setZMotionMode</a>(<a class="code" href="group___d6.html#gga78bd37a3243af04c0ef86a19ffd70e88ab01e9c612e88a93f12fa57af51b10d53">D6MM_Free</a>);
    
    <a class="code" href="classp_j_d6_drive.html" title="Class used to describe drive properties for a pJointD6.">pJD6Drive</a> zDrive;
    zDrive.<a class="code" href="classp_j_d6_drive.html#ab59d2eeb15b6e352f57122929b215938">driveType</a>    = <a class="code" href="group___d6.html#ggaad3a2f6a45e027205242f80f11df0bd5a4c92a67fe52a5d25b15e7096e8cd30e5">D6DT_Position</a>;
    zDrive.<a class="code" href="classp_j_d6_drive.html#ab7fbe3ada7744cdedcf36fdb8dc9fe0a">forceLimit</a>   = FLT_MAX;
    zDrive.<a class="code" href="classp_j_d6_drive.html#af8bec735b464804a99069712ee260a8c">spring</a>       = 100.0f;
    zDrive.<a class="code" href="classp_j_d6_drive.html#a8ce5f11363b6b130edd4a17921351849">damping</a>      = 0.0f;
    
    d6.setZDrive(zDrive);
    
    <span class="comment">//Drive the joint to the local(body[0]) origin : </span>
    Vector drivePosition;
    d6.<a class="code" href="classp_joint_d6.html#a805bde5623512826383c6f3c6524920e" title="If the type of xDrive (yDrive,zDrive) is D6DT_Position, drivePosition defines the...">setDrivePosition</a>(drivePosition);
}
</pre></div><p> </span> <br/>
</p>
<p><b>Why Not Just Drive with Forces?</b> One way to drive a joint is to apply a force. While this can be effective for modeling soft, springy effects, it quickly becomes unstable for stiff springs and forces, due to a limitation of the numerical integration used to advance time from one time step to the next. The use of forces for direct drive should be avoided unless you are fully aware of the technical meaning of stiff, and therefore understand the potential pitfalls of simulation using a first order method.</p>
<p>The d6joint uses a drive constraint in which the springs are implicitly integrated within the solver, as this is the best way to model stiff behavior for stable simulation. Use of drive constraints are also convenient for modeling soft behavior so there is little reason to use direct force.</p>
<p>If you do use forces, be careful to apply equal and opposite forces to the parent and child actors or the result will be physically incorrect.</p>
<hr/>
 </div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Feb 3 18:57:23 2010 for vtPhysX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
