<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>vtPhysX: </title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="online.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">PhysX for Virtools</a>&nbsp;&raquo&nbsp;<a class="el" href="buildingblocks.html">Building Blocks</a>&nbsp;&raquo&nbsp;<a class="el" href="joints.html">Joints</a>
  </div>
</div>
<div class="contents">
<p><br/>
 PJBall is categorized in <a class="el" href="joints.html">Joints</a> <br/>
 <br/>
See <a href="pJBall.cmo">pJBall.cmo</a>.</p>
<h3>Description</h3>
<p>Apply to a <a href="Documentation.chm::/beobjects/1_ck3dentity.html">3DEntity</a><br/>
 Creates or modifies a sphere joint. <br/>
 <br/>
 DOFs removed: 3<br/>
 DOFs remaining: 3<br/>
 <br/>
 </p>
<div align="center">
<img src="sphericalJoint.png" alt="sphericalJoint.png"/>
</div>
<p>A spherical joint is the simplest kind of joint. It constrains two points on two different bodies from coinciding. This point, located in world space, is the only parameter that has to be specified (the other parameters are optional). Specifying the anchor point (point that is forced to coincide) in world space guarantees that the point in the local space of each body will coincide when the point is transformed back from local into world space.</p>
<p>By attaching a series of spherical joints and bodies, chains/ropes can be created. Another example for a common spherical joint is a person's shoulder, which is quite limited in its range of motion.</p>
<h3>Technical Information</h3>
<div align="center">
<img src="PJBall.png" alt="PJBall.png"/>
</div>
<p><span class="in">In: </span>triggers the process <br/>
 <span class="out">Out: </span>is activated when the process is completed. <br/>
 <br/>
 <span class="pin">Body B: </span>The second body. Leave blank to create a joint constraint with the world. <br/>
 <br/>
 <span class="pin">Anchor:</span>A point in world space coordinates. See <a class="el" href="classp_joint_ball.html#a4fac8354f3b9084c92c138c7f0ec2715" title="Sets the global space anchor.">pJointBall::setAnchor()</a>. <br/>
 <span class="pin">Anchor Reference: </span>A helper entity to transform a local anchor into the world space. <br/>
 <span class="pin">Swing Limt Axis: </span>Limit axis defined in the joint space of body a. See <a class="el" href="classp_joint_ball.html#ac5a8db29817fcf8f756f61927c1cb666" title="Sets the limit axis defined in the joint space of body a.">pJointBall::setSwingLimitAxis()</a>. <br/>
 <span class="pin">Projection Mode: </span>Joint projection mode. See pJointBall::setProjectionMode() and <a class="el" href="group___joints.html#ga635428fef8d6e4afba288610c9c65bd5">ProjectionMode</a>. <br/>
 <br/>
 <span class="pin">Projection Distance: </span>If any joint projection is used, it is also necessary to set projectionDistance to a small value greater than zero. When the joint error is larger than projectionDistance the SDK will change it so that the joint error is equal to projectionDistance. Setting projectionDistance too small will introduce unwanted oscillations into the simulation. <br/>
 <span class="pin">Collision :</span>Enable Collision. See <a class="el" href="classp_joint_revolute.html#ac40d5959037929c931a81b4bc094dc76" title="Enables collision between both bodies.">pJointRevolute::enableCollision()</a>. <br/>
 <br/>
 <span class="pin">Swing Limit: </span>Swing limit of the twist axis. See <a class="el" href="classp_joint_ball.html#ad71607d68056b111744780c979f42dc5" title="Enables collision between the two bodies.">pJointBall::enableCollision()</a>. <br/>
 <br/>
 <span class="pin">Twist High Limit: </span>Higher rotation limit around twist axis. See <a class="el" href="classp_joint_ball.html#a4958bdd3738402b299cd81f6001abfd0" title="Sets the high rotation limit around the twist axis.">pJointBall::setTwistHighLimit()</a>. <br/>
 <br/>
 <span class="pin">Twist Low Limit: </span>Lower rotation limit around twist axis. See <a class="el" href="classp_joint_ball.html#ad0f0bf451759da5f808fb0b471f449a5" title="Sets the high rotation limit around the twist axis.">pJointBall::setTwistLowLimit()</a>. <br/>
 <br/>
</p>
<p><span class="pin">Swing Spring: </span>.The spring that works against swinging. See <a class="el" href="classp_joint_ball.html#a1d7ed31ea821e7794424c172bd7e3273" title="Sets a spring that works against swinging.">pJointBall::setSwingSpring()</a>. <br/>
</p>
<p><span class="pin">Twist Spring: </span>.The spring that works against twisting. See <a class="el" href="classp_joint_ball.html#af264a2bf66b01b0e831fda6eaca99775" title="Sets a spring that works against twisting.">pJointBall::setTwistSpring()</a>. <br/>
</p>
<p><span class="pin">Joint Spring: </span>.The spring that lets the joint get pulled apart. See <a class="el" href="classp_joint_ball.html#a105e31a06b547d80e0bc398407b5ae80" title="Sets a spring that lets the joint get pulled apart.">pJointBall::setJointSpring()</a>. <br/>
 <br/>
 <br/>
</p>
<p><span class="setting">Swing Limit: </span>Enables parameter input for swing limit. <br/>
 <span class="setting">Twist High Limit: </span>Enables parameter input for high twist limit. <br/>
 <span class="setting">Twist Low Limit: </span>Enables parameter input for low twist limit. <br/>
 <span class="setting">Swing Spring: </span>.Enables parameter input for swing spring. <br/>
 <span class="setting">Twist Spring: </span>.Enables parameter input for twist spring. <br/>
 <span class="setting">Joint Spring: </span>.Enables parameter input for joint spring. <br/>
</p>
<h4>Spherical Joint Limits</h4>
<p>Spherical joints allow limits that can approximate the physical limits of motion on a human arm. It is possible to specify a cone which limits how far the arm can swing from a given axis. In addition, a twist limit can be specified which controls how much the arm is allowed to twist around its own axis.</p>
<div align="center">
<img src="sphericalLimits.png" alt="sphericalLimits.png"/>
</div>
<p>NOTE: There are similar restrictions on the twist limits for spherical joints as there are for revolute joints.</p>
<p><br/>
 </p>
<h3>Warning</h3>
<p>The body must be dynamic. <br/>
 <br/>
</p>
<h3>VSL : Creation </h3>
<p><br/>
 <span class="NiceCode"> </p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> main()
{
    <a class="code" href="class_physic_manager.html" title="PhysicManager is a Virtools manager and acts as singleton object.">PhysicManager</a> pm = GetPhysicManager();
    <a class="code" href="classp_factory.html" title="Singleton class to create physic objects.">pFactory</a> pf  = getPFactory();
    
        
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyA = pm.getBody(bodyARef);
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyB = pm.getBody(bodyBRef);

    <span class="comment">//sanity check : </span>
    <span class="keywordflow">if</span>(!bodyA &amp;&amp; !bodyB )
        <span class="keywordflow">return</span>;

    <a class="code" href="classp_world.html" title="Class to maintain physical objects.">pWorld</a> w  = null;
    
    <span class="comment">//bodyARef or bodyBRef can be zero. This creates a ball constraint with the environment then.</span>
    <span class="comment">//However, we need a valid world object : </span>
    <span class="keywordflow">if</span>(bodyA)
    {
        w = bodyA.getWorld();
    }
    
    <span class="keywordflow">if</span>(bodyB)
    {
        w = bodyB.getWorld();
    }
    

    <span class="comment">//we ask the world whether a joint of the type spherical exists already amongst the both bodies : </span>
    <a class="code" href="classp_joint.html" title="Abstract base class for the different types of joints.">pJoint</a> joint  = w.getJoint(bodyARef,bodyBRef,<a class="code" href="group___joints.html#ggadcea5be96146723d822b7db05024d881a1b82201e3ca8184d0580b56feb52d99f">JT_Spherical</a>);

    <a class="code" href="classp_joint_ball.html" title="A sphere joint constrains two points on two bodies to coincide.">pJointBall</a> ballJoint = null;
    
    <span class="keywordflow">if</span>(!joint)
    {
        Vector globalAnchor  = anchor;
        <span class="keywordflow">if</span>(anchorReference)
            anchorReference.Transform(globalAnchor,anchor);
        
        ballJoint = pf.createBallJoint(bodyARef,bodyBRef,globalAnchor,swingLimitAxis);
    }
    
}
</pre></div><p> </span> <br/>
</p>
<h3>VSL : Limit Modification </h3>
<p><br/>
 <span class="NiceCode"> </p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> main()
{
    <a class="code" href="class_physic_manager.html" title="PhysicManager is a Virtools manager and acts as singleton object.">PhysicManager</a> pm = GetPhysicManager();
    <a class="code" href="classp_factory.html" title="Singleton class to create physic objects.">pFactory</a> pf  = getPFactory();
    
        
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyA = pm.getBody(bodyARef);
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyB = pm.getBody(bodyBRef);


    <span class="comment">//sanity check : </span>
    <span class="keywordflow">if</span>(!bodyA &amp;&amp; !bodyB )
        <span class="keywordflow">return</span>;

    <a class="code" href="classp_world.html" title="Class to maintain physical objects.">pWorld</a> w  = null;
    
    <span class="comment">//bodyARef or bodyBRef can be zero. This creates a ball constraint with the environment then.</span>
    <span class="comment">//However, we need a valid world object : </span>
    <span class="keywordflow">if</span>(bodyA)
    {
        w = bodyA.getWorld();
    }
    
    <span class="keywordflow">if</span>(bodyB)
    {
        w = bodyB.getWorld();
    }
    

    <span class="comment">//we retrieve a joint object : </span>
    <a class="code" href="classp_joint.html" title="Abstract base class for the different types of joints.">pJoint</a> joint  = w.getJoint(bodyARef,bodyBRef,<a class="code" href="group___joints.html#ggadcea5be96146723d822b7db05024d881a1b82201e3ca8184d0580b56feb52d99f">JT_Spherical</a>);
    <span class="keywordflow">if</span>(!joint)
        <span class="keywordflow">return</span>;

    <span class="comment">//Virtools is not providing simple downcasts : </span>
    <a class="code" href="classp_joint_ball.html" title="A sphere joint constrains two points on two bodies to coincide.">pJointBall</a> ballJoint = joint.castBall();
    <span class="keywordflow">if</span>(!ballJoint)
            <span class="keywordflow">return</span>;
    
    

    <span class="comment">//change swing limit : </span>
    <a class="code" href="classp_joint_limit.html" title="Describes a joint limit. pJointLimit is registered as custom structure pJLimit and...">pJointLimit</a> swingLimit = ballJoint.getSwingLimit();
    swingLimit.<a class="code" href="classp_joint_limit.html#af144874fe67f575db467873955a16624">value</a> = _swingLimit; <span class="comment">//must be non-zero, otherwise swing limit is disable at all!</span>
    ballJoint.<a class="code" href="classp_joint_ball.html#a20209f285e86c8206ab85f30caf97076" title="Sets the swing limit of the twist axis.">setSwingLimit</a>(swingLimit);
    
    
    <span class="comment">//change twist high limit : </span>
    <a class="code" href="classp_joint_limit.html" title="Describes a joint limit. pJointLimit is registered as custom structure pJLimit and...">pJointLimit</a> twistLimitHigh = ballJoint.getTwistHighLimit();
    twistLimitHigh.<a class="code" href="classp_joint_limit.html#af144874fe67f575db467873955a16624">value</a> = _twistLimitHigh; <span class="comment">//must be non-zero, otherwise twist limit is disable at all!</span>
    ballJoint.<a class="code" href="classp_joint_ball.html#a4958bdd3738402b299cd81f6001abfd0" title="Sets the high rotation limit around the twist axis.">setTwistHighLimit</a>(twistLimitHigh);
    
    <span class="comment">//change twist low limit : </span>
    <a class="code" href="classp_joint_limit.html" title="Describes a joint limit. pJointLimit is registered as custom structure pJLimit and...">pJointLimit</a> twistLimitLow = ballJoint.getTwistLowLimit();
    twistLimitLow.<a class="code" href="classp_joint_limit.html#af144874fe67f575db467873955a16624">value</a> = _twistLimitLow; <span class="comment">//must be non-zero, otherwise twist limit is disable at all!</span>
    ballJoint.<a class="code" href="classp_joint_ball.html#ad0f0bf451759da5f808fb0b471f449a5" title="Sets the high rotation limit around the twist axis.">setTwistLowLimit</a>(twistLimitLow);
    
            
        
}
</pre></div><p> </span> <br/>
 <br/>
 <br/>
</p>
<p>Is utilizing <a class="el" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> <a class="el" href="classp_world.html" title="Class to maintain physical objects.">pWorld</a> <a class="el" href="class_physic_manager.html" title="PhysicManager is a Virtools manager and acts as singleton object.">PhysicManager</a> pFactory::createJointBall().<br/>
 </p>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Feb 3 18:57:23 2010 for vtPhysX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
