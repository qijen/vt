<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>vtPhysX: Twist and Swing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="online.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">PhysX for Virtools</a>&nbsp;&raquo&nbsp;<a class="el" href="guide.html">Guide</a>&nbsp;&raquo&nbsp;<a class="el" href="joint.html">Joint</a>&nbsp;&raquo&nbsp;<a class="el" href="d6joints.html">6DOF Joints</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="TwistAndSwing">Twist and Swing </a></h1><h3>Twist and Swing</h3>
<p>Twist and swing coordinates for 3D orientation are based on its decomposition into a two orthogonal rotation sequence. They sit between Euler angle decompositions into a three orthogonal rotation sequence and direct representations of the single shortest rotation axis/angle.</p>
<p>In the twist and swing decomposition, an orientation is achieved by a sequence of two rotations:</p>
<p>(1) a twist rotation about a selected axis and (2) a swing rotation about an axis in its perpendicular plane.</p>
<p>Hence, twist describes the DOF spin about the selected twist axis, while swing describes the direction in space of the twist axis. With two bodies involved, the twist and swing decomposition is based on a selected twist axis in both the parent and child; the twist axis in the parent acts as the central reference direction relative to which the swing direction of the child twist axis is measured.</p>
<p><b>Globe Visualization</b></p>
<p>Imagine the twist axis as a radius tracing out points on the globe as it swings and the central reference swing direction positioned towards the North Pole. A swing rotation plots a point from the North Pole to the target point by following the shortest path on the sphere - a line of longitude in this case.</p>
<p>The swing rotation axis lies in the plane of the equator 90 degrees east of the swing longitude. NOTE: The direction is computed from the cross product of the parent and child twist axes.</p>
<p>Now set a zero reference for twist as a given heading at the North Pole. This twist reference is transferred to other target points on the globe by maintaining the heading along the shortest path to the target point. This is an isotropic definition of twist in that it is independent of the swing direction to the target point.</p>
<p><b>The Singularity at Full-Swing</b></p>
<p>The South Pole is a problem case because there is no unique single shortest path from the North Pole; all lines of longitude meet at both poles, therefore a 180 degree swing rotation around any arbitrary equatorial axis takes a point from the North to the South Pole. Twist cannot be defined and swing is redundant.</p>
<p><b>Twist Parameter</b> Twist can be specified and stored as an angle; however, performing the rotation requires trig functions to be evaluated. Therefore, it is more efficient to store a pre-computed trig function, which will be demonstrated later in this section.</p>
<p><b>Swing Parameters as Rotation Vector Components</b> Swing is parameterized by the two Cartesian coordinates of its rotation vector in the equator plane. The swing direction is inherent in the direction of the vector, i.e., the relative values of its two coordinates. The swing angle is encoded in the magnitude of the vector, i.e., its length as given by the norm of its two coordinates. The options of suitable trig functions for mapping angle to magnitude is covered below.</p>
<p>Note that swing is NOT parameterized by swing-angle and swing-direction, or latitude and longitude angles as a picture of the globe might seem to suggest; these are the natural coordinates for a pair of sequential Euler angle rotations rather than two parameters of a single rotation. They are singular at the origin; namely, the North Pole, where swing-angle is zero and swing-direction is redundant.</p>
<p><b>Swing Parameters as Projected Components</b> The two swing parameters can also be seen as components of the twist axis projected flat onto the equatorial plane. The equivalent rotation vector lays 90 degrees east of the projected axis. The projection is more general than just a shadow; it can be any suitable function for mapping angle to magnitude.</p>
<p><b>Choice of Projection for Mapping Magnitude</b> The angle itself is an obvious choice for the magnitude function; however, to execute the rotation requires costly sine and cosine evaluations. Below are four trig functions based on spherical projections in order of increasing suitability for numerical work.</p>
<h5>sin-angle</h5>
<p>The cross product of the parent and child twist axes is a vector in the direction of the swing rotation axis. Its magnitude is the sine of the swing angle. This corresponds to parallel projection form, a light source far above the North Pole. However, note that the shadow of the twist axis on the equatorial plane does not distinguish a North hemisphere point from its reflection through the equator in the South hemisphere.</p>
<p>The sine function is not a suitable magnitude-mapping function because it only works for angles up to 90 degrees.</p>
<h5>tan-half-angle</h5>
<p>This choice is of more theoretical than practical use.</p>
<p>A light source located at the South Pole maps all North hemisphere points to inside the equator and South hemisphere points to outside the equator; however, as the South Pole is approached, the image goes to infinity. This is the stereographic projection. Its magnitude is the tangent of half the swing angle. This projection is the unique conformal projection between the sphere and the plane in that it preserves all angles. Circles on the sphere generally map to circles on the plane except for great circles which map to straight lines.</p>
<p>Instead of the familiar 2-sphere, i.e., a 2D spherical surface embedded in 3D space, imagine the 3-sphere, the space inhabited by unit quaternions, as a 3D spherical surface embedded in 4D space. In fact, only half the 3-sphere is needed because diametrically opposite points represent the same orientation. The tan-half-angle projection is the central projection from the hemi-3-sphere onto the tangent (hyper) plane at its pole! In the central projection, the light source is placed at the center of the sphere.</p>
<h5>tan-quarter-angle</h5>
<p>This corresponds to the stereographic projection from the quaternion sphere into 3D space. It is the unique conformal projection from the space of rotations into Euclidean space.</p>
<p>It is easy to compute the quaternion (cos-half-angle and sin-half-angle) from tan-quarter-angle.</p>
<p><b>Twist and Swing is not Axis and Angle</b></p>
<p>Do not confuse swing and twist with axis-and-angle. Both describe the direction of an axis and an angle of rotation about that axis. The difference is in the definition of the axis.</p>
<p>The axis-and-angle axis is the axis of the single shortest rotation. It is not fixed in the world or the body; its arbitrary direction in space is decided by the difference between reference and required orientations. The angle is the magnitude of the single shortest rotation between the orientations.</p>
<p>The twist and swing axis is a physical axis fixed in the body. Its direction is specified by a swing rotation about an axis in the perpendicular plane. The twist angle specifies a second, orthogonal, decoupled rotation about the axis.</p>
<h5>Twist and Swing Decomposition in Quaternion Components</h5>
<p>This section shows how the twist and swing decomposition is done with quaternion mathematics.</p>
<p>The quaternion representing the general 3D orientation is written below,</p>
<p>Qxyz = (Qw, Qx, Qy, Qz)</p>
<p>with 'w' indexing the scalar and 'x','y','z' indexing the components of the vector.</p>
<p>If the x-axis is the special axis in defining twist and swing, then the decomposition is computed in quaternion multiplication, Qxyz=Qswing Qtwist, with the following:</p>
<div align="center">
<img src="6dof_twistswingEq1.PNG" alt="6dof_twistswingEq1.PNG"/>
</div>
<p>The proof begins by writing the quaternion representing the twist rotation around the x-axis as,</p>
<p>Qtwist = Qx = (Cx, Sx, 0, 0)</p>
<p>and the quaternion representing the swing rotation around an axis in the yz-plane with the following:</p>
<p>Qswing = Qyz = (Cyz, 0, Sy, Sz)</p>
<p>Below, 'c' represents the scalar and 's' represents the vector components in relation to the cosine and sine of the half angles:</p>
<div align="center">
<img src="6dof_twistswingEq2.PNG" alt="6dof_twistswingEq2.PNG"/>
</div>
<p>Remember that generally </p>
<div align="center">
<img src="6dof_twistswingEq3.PNG" alt="6dof_twistswingEq3.PNG"/>
</div>
<p> so we have</p>
<div align="center">
<img src="6dof_twistswingEq4.PNG" alt="6dof_twistswingEq4.PNG"/>
</div>
<p>Using quaternion multiplication, the rotations compose right-to-left just like rotation matrices, shown below:</p>
<div align="center">
<img src="6dof_twistswingEq5.PNG" alt="6dof_twistswingEq5.PNG"/>
</div>
<p>The rotations are treated as active rotations around global fixed axes rather than the current local axes. Expanding the quaternion multiplication looks like this:</p>
<div align="center">
<img src="6dof_twistswingEq6.PNG" alt="6dof_twistswingEq6.PNG"/>
</div>
<p>Extracting the twist quaternion from this is straightforward once you see that Qw^2 + Qx^2 = Cyz^2</p>
<div align="center">
<img src="6dof_twistswingEq7.PNG" alt="6dof_twistswingEq7.PNG"/>
</div>
<p>Then the swing quaternion is extracted by inverting (conjugating) the twist quaternion and multiplying</p>
<div align="center">
<img src="6dof_twistswingEq8.PNG" alt="6dof_twistswingEq8.PNG"/>
</div>
<p>Expanding the quaternion multiplication gives</p>
<div align="center">
<img src="6dof_twistswingEq9.PNG" alt="6dof_twistswingEq9.PNG"/>
</div>
<p>which completes the proof. </p>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Feb 3 18:57:23 2010 for vtPhysX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
