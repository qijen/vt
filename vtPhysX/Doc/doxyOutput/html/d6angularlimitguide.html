<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>vtPhysX: Angular Limits</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="online.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">PhysX for Virtools</a>&nbsp;&raquo&nbsp;<a class="el" href="guide.html">Guide</a>&nbsp;&raquo&nbsp;<a class="el" href="joint.html">Joint</a>&nbsp;&raquo&nbsp;<a class="el" href="d6joints.html">6DOF Joints</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="D6AngularLimitGuide">Angular Limits </a></h1><h3>Angular Joint Limits</h3>
<p>Limits on the 1DOF twist and the 2DOF swing motions are configured separately, therefore, unlike the linear case, two limit constraints can be active on angular DOFs.</p>
<p>Also unlike linear, each DOF has its own separate maximum limit parameter - angles in this case. As with the linear radius parameter, they are specified as maximum angles measured symmetrically on both sides of the zero angle so that the full angular separation between the limits is twice the specified angle.</p>
<p><b>Twist Limit</b></p>
<p>The twist limit is a little different than the swing limits, specified using a pair of angles rather than just a single radius. This allows the limit orientations to be nonsymmetrical around the twist axis, unlike the swing axis. </p>
<div align="center">
<img src="6dof_twistlimit.png" alt="6dof_twistlimit.png"/>
</div>
<p>To visualize the affect of the limits, it is best to consider them with respect to a particular axis, such as the z-axis. In the diagram above, the child frame and parent frame are aligned. When the joint twists, the z-axis can rotate around the twist axis, but only as far as the limits (red lines).</p>
<p><span class="NiceCode"> </p>
<div class="fragment"><pre class="fragment"><span class="comment">//we retrieve a joint object : </span>
<a class="code" href="classp_joint.html" title="Abstract base class for the different types of joints.">pJoint</a> joint  = w.getJoint(bodyARef,bodyBRef,<a class="code" href="group___joints.html#ggadcea5be96146723d822b7db05024d881a37ee076a40104ad3394dbb49468a8e46">JT_Revolute</a>);
<span class="keywordflow">if</span>(!joint)
<span class="keywordflow">return</span>;

<span class="comment">//Virtools is not providing simple downcasts : </span>
<a class="code" href="classp_joint_d6.html" title="A D6 joint is a general constraint between two actors.">pJointD6</a> d6  = joint.castD6Joint();
<span class="keywordflow">if</span>(!d6)
<span class="keywordflow">return</span>;

<span class="comment">//Set a hard twist limit, which limits the twist angle to twistLowLimit &lt; twistAngle &lt; twistHighLimit</span>
    
d6.<a class="code" href="classp_joint_d6.html#a06255644432722dc57ebd87bea8c717f" title="Sets the motion mode for the twist axis.">setTwistMotionMode</a>(<a class="code" href="group___d6.html#gga78bd37a3243af04c0ef86a19ffd70e88a2838ecaea35eb766d06b0561aaa3dd22">D6MM_Limited</a>);

<span class="keywordtype">float</span> twistLowLimitRad = 0.7f;

<a class="code" href="classp_j_d6_soft_limit.html" title="Describes a joint soft limit for D6 usage. pJD6SoftLimit is registered as custom...">pJD6SoftLimit</a> twistLimitLow;

twistLimitLow.<a class="code" href="classp_j_d6_soft_limit.html#a91814e50aa95cae88a642f264a7ee331" title="The angle or position beyond which the limit is active.">value</a>     = twistLowLimitRad ;
twistLimitLow.<a class="code" href="classp_j_d6_soft_limit.html#ac7e067bb289ad4dcd175ea409a524b7a" title="If spring is greater than zero, this is the damping of the spring.">damping</a>   = 0.0f;     <span class="comment">//0 is default anyway</span>
twistLimitLow.<a class="code" href="classp_j_d6_soft_limit.html#ab1f5506703f3085e14def6a66e51beab" title="Controls the amount of bounce when the joint hits a limit.     A restitution value...">restitution</a> = 0.0f;   <span class="comment">//0 is default anyway</span>
twistLimitLow.<a class="code" href="classp_j_d6_soft_limit.html#a0dfd5a6051ff110ba0daf9994a4d8877" title="If greater than zero, the limit is soft, i.e. a spring pulls the joint back to the...">spring</a> = 0.0f;    <span class="comment">//0 is default anyway</span>

d6.setTwistLowLimit(twistLimitLow);



<span class="keywordtype">float</span> twistHighLimitRad = 1.54f;

<a class="code" href="classp_j_d6_soft_limit.html" title="Describes a joint soft limit for D6 usage. pJD6SoftLimit is registered as custom...">pJD6SoftLimit</a> twistLimitHigh;

twistLimitHigh.<a class="code" href="classp_j_d6_soft_limit.html#a91814e50aa95cae88a642f264a7ee331" title="The angle or position beyond which the limit is active.">value</a>    = twistHighLimitRad;
twistLimitHigh.<a class="code" href="classp_j_d6_soft_limit.html#ac7e067bb289ad4dcd175ea409a524b7a" title="If spring is greater than zero, this is the damping of the spring.">damping</a>  = 0.0f;     <span class="comment">//0 is default anyway</span>
twistLimitHigh.<a class="code" href="classp_j_d6_soft_limit.html#ab1f5506703f3085e14def6a66e51beab" title="Controls the amount of bounce when the joint hits a limit.     A restitution value...">restitution</a> = 0.0f;  <span class="comment">//0 is default anyway</span>
twistLimitHigh.<a class="code" href="classp_j_d6_soft_limit.html#a0dfd5a6051ff110ba0daf9994a4d8877" title="If greater than zero, the limit is soft, i.e. a spring pulls the joint back to the...">spring</a> = 0.0f;   <span class="comment">//0 is default anyway</span>

d6.setTwistHighLimit(twistLimitHigh);
</pre></div><p> </span> <br/>
</p>
<hr/>
<p><b>Swing Limit Types</b></p>
<p>The table below lists all five swing limit possibilities with suggested their names:</p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><p><b>Swing1 </b>  </p>
</td><td><p><b>Swing2 </b>  </p>
</td><td><p><b>Limit Name </b>  </p>
<p></p>
</td></tr>
<tr>
<td><p>limited<br/>
  </p>
</td><td><p>limited<br/>
  </p>
</td><td><p>(elliptic) swing-cone limit </p>
<p></p>
</td></tr>
<tr>
<td><p>limited<br/>
 </p>
</td><td><p>free<br/>
  </p>
</td><td><p>swing1 limit </p>
<p></p>
</td></tr>
<tr>
<td><p>free<br/>
 </p>
</td><td><p>limited<br/>
 </p>
</td><td><p>swing2 limit </p>
<p></p>
</td></tr>
<tr>
<td><p>limited<br/>
 </p>
</td><td><p>locked<br/>
 </p>
</td><td><p>zero-swing2 joint with swing1 limit </p>
<p></p>
</td></tr>
<tr>
<td><p>locked<br/>
  </p>
</td><td><p>limited<br/>
  </p>
</td><td><p>zero-swing1 joint with swing2 limit  </p>
</td></tr>
</table>
<p><b>A swing-cone limit:</b></p>
<p>If both swing DOFs are limited, then the limit surface geometry is a cone centered on the principal axis of the parent. The principal axis of the child is constrained to stay inside the parent-fixed cone.</p>
<div align="center">
<img src="6dof_conelimit.png" alt="6dof_conelimit.png"/>
</div>
<p>In the above screen shot, the cone is represented in red. The principal child axis (x-axis) is a red arrow near the center of the cone; it is constrained to lie within the cone.</p>
<p>If both parameters specifying the maximum swing angles are equal, then the cone is circular. Generally, however, the cone has an elongated elliptical shape.</p>
<p>The maximum swing angles may be set between 0 and 180°.</p>
<p>Avoid cases where one swing limit angle is much smaller than the other as this results in an extremely elongated (highly eccentric elliptic) swing cone limit which may cause problems in simulation (the small swing DOF could be locked instead).</p>
<p><span class="NiceCode"> </p>
<div class="fragment"><pre class="fragment"><span class="comment">//we retrieve a joint object : </span>
<a class="code" href="classp_joint.html" title="Abstract base class for the different types of joints.">pJoint</a> joint  = w.getJoint(bodyARef,bodyBRef,<a class="code" href="group___joints.html#ggadcea5be96146723d822b7db05024d881a37ee076a40104ad3394dbb49468a8e46">JT_Revolute</a>);
<span class="keywordflow">if</span>(!joint)
<span class="keywordflow">return</span>;

<span class="comment">//Virtools is not providing simple downcasts : </span>
<a class="code" href="classp_joint_d6.html" title="A D6 joint is a general constraint between two actors.">pJointD6</a> d6  = joint.castD6Joint();
<span class="keywordflow">if</span>(!d6)
<span class="keywordflow">return</span>;


<span class="comment">//Limit motion on the swing axis to lie within the elliptical cone specified by the     </span>
<span class="comment">//angles swing1Limit and swing2Limit, relative to the parent frame.</span>

d6.<a class="code" href="classp_joint_d6.html#a85b531ab98652ee24b990baa75f45f26" title="Sets the motion mode for the swing1 axis.">setSwing1MotionMode</a>(<a class="code" href="group___d6.html#gga78bd37a3243af04c0ef86a19ffd70e88a2838ecaea35eb766d06b0561aaa3dd22">D6MM_Limited</a>);
    

<span class="keywordtype">float</span> swing1LimitRad = 0.7f;

<a class="code" href="classp_j_d6_soft_limit.html" title="Describes a joint soft limit for D6 usage. pJD6SoftLimit is registered as custom...">pJD6SoftLimit</a> swing1Limit;

swing1Limit.<a class="code" href="classp_j_d6_soft_limit.html#a91814e50aa95cae88a642f264a7ee331" title="The angle or position beyond which the limit is active.">value</a>   = swing1LimitRad ;
swing1Limit.<a class="code" href="classp_j_d6_soft_limit.html#ac7e067bb289ad4dcd175ea409a524b7a" title="If spring is greater than zero, this is the damping of the spring.">damping</a>     = 0.0f;     <span class="comment">//0 is default anyway</span>
swing1Limit.<a class="code" href="classp_j_d6_soft_limit.html#ab1f5506703f3085e14def6a66e51beab" title="Controls the amount of bounce when the joint hits a limit.     A restitution value...">restitution</a> = 0.0f; <span class="comment">//0 is default anyway</span>
swing1Limit.<a class="code" href="classp_j_d6_soft_limit.html#a0dfd5a6051ff110ba0daf9994a4d8877" title="If greater than zero, the limit is soft, i.e. a spring pulls the joint back to the...">spring</a> = 0.0f;  <span class="comment">//0 is default anyway</span>

d6.setSwing1Limit(swing1Limit);



<span class="keywordtype">float</span> swing2LimitRad = 0.7f;

<a class="code" href="classp_j_d6_soft_limit.html" title="Describes a joint soft limit for D6 usage. pJD6SoftLimit is registered as custom...">pJD6SoftLimit</a> swing2Limit;

swing2Limit.<a class="code" href="classp_j_d6_soft_limit.html#a91814e50aa95cae88a642f264a7ee331" title="The angle or position beyond which the limit is active.">value</a>   = swing2LimitRad ;
swing2Limit.<a class="code" href="classp_j_d6_soft_limit.html#ac7e067bb289ad4dcd175ea409a524b7a" title="If spring is greater than zero, this is the damping of the spring.">damping</a>     = 0.0f;     <span class="comment">//0 is default anyway</span>
swing2Limit.<a class="code" href="classp_j_d6_soft_limit.html#ab1f5506703f3085e14def6a66e51beab" title="Controls the amount of bounce when the joint hits a limit.     A restitution value...">restitution</a> = 0.0f; <span class="comment">//0 is default anyway</span>
swing2Limit.<a class="code" href="classp_j_d6_soft_limit.html#a0dfd5a6051ff110ba0daf9994a4d8877" title="If greater than zero, the limit is soft, i.e. a spring pulls the joint back to the...">spring</a> = 0.0f;  <span class="comment">//0 is default anyway</span>

d6.setSwing2Limit(swing2Limit);


</pre></div><p> </span> <br/>
</p>
<hr/>
 <b>A single swing limit:</b></p>
<p>If only one swing DOF is limited and the other is left free, this is interpreted as a limit surface in the shape of a double cone aligned with the free swing axis of the parent frame. The principal axis of the child is constrained to be excluded from the double cone.</p>
<p>If the other swing DOF is locked rather than left free, then swing sphere reduces to a circle and the single swing limit is just a segment of the circle located on the specified swing limit angle either side of zero.</p>
<div align="center">
<img src="6dof_swingLimit.PNG" alt="6dof_swingLimit.PNG"/>
</div>
 </div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Feb 3 18:57:23 2010 for vtPhysX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
