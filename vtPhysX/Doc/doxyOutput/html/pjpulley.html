<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>vtPhysX: </title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="online.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">PhysX for Virtools</a>&nbsp;&raquo&nbsp;<a class="el" href="buildingblocks.html">Building Blocks</a>&nbsp;&raquo&nbsp;<a class="el" href="joints.html">Joints</a>
  </div>
</div>
<div class="contents">
<p><br/>
 PJPulley is categorized in <a class="el" href="joints.html">Joints</a> <br/>
 <br/>
See <a href="pJPulley.cmo">pJPulley.cmo</a>.</p>
<h3>Description</h3>
<p>Apply to a <a href="Documentation.chm::/beobjects/1_ck3dentity.html">3DEntity</a><br/>
 Creates or modifies a pulley (rope) joint. <br/>
</p>
<div align="center">
<img src="pulleyJoint.png" alt="pulleyJoint.png"/>
</div>
<p>The pulley joint simulates a rope that can be thrown across a pair of pulleys. In this way, it is similar to the distance joint (the length of the rope is the distance) but the rope doesn't connect the two bodies along the shortest path, rather it leads from the connection point on one actor to the pulley point (fixed in world space), then to the second pulley point, and finally to the other actor.</p>
<p>The pulley joint can also be used to simulate a rope around a single point by making the pulley points coincide.</p>
<p>Note that a setup where either object attachment point coincides with its corresponding pulley suspension point in world space is invalid. In this case, the simulation would be unable to determine the appropriate direction in which to pull the object and a random direction would result. The simulation will be unstable. Note that it is also invalid to allow the simulation to end up in such a state.</p>
<h3>Technical Information</h3>
<div align="center">
<img src="PJPulley.png" alt="PJPulley.png"/>
</div>
<p><span class="in">In: </span>triggers the process <br/>
 <span class="out">Out: </span>is activated when the process is completed. <br/>
 <br/>
 <span class="pin">Body B: </span>The second body. Leave blank to create a joint constraint with the world. <br/>
 <br/>
</p>
<p><span class="pin">Local Anchor A:</span>Sets the attachment point of joint in bodie[0]'s space.See <a class="el" href="classp_joint_pulley.html#a9fe2aecc407a92787c8e434ee2f4b688" title="Sets the attachment point of joint in bodie[0]&#39;s space.">pJointPulley::setLocalAnchorA()</a>. <br/>
</p>
<p><span class="pin">Local Anchor B:</span>Sets the attachment point of joint in bodie[1]'s space.See <a class="el" href="classp_joint_pulley.html#a177e677c2cfbd144524ffb4db425813a" title="Sets the attachment point of joint in bodie[1]&#39;s space.">pJointPulley::setLocalAnchorB()</a>. <br/>
</p>
<p><span class="pin">Pulley A: </span>Sets the suspension point of joint in world space. See <a class="el" href="classp_joint_pulley.html#a9a6fd4f5f82d399b51812c7d4d56cf94" title="Sets the suspension point of joint in world space.">pJointPulley::setPulleyA()</a>. <br/>
</p>
<p><span class="pin">Pulley A Reference: </span>Sets the suspension point of joint in local space by using an reference entity. The above vector gets transformed. <br/>
</p>
<p><span class="pin">Pulley B: </span>Sets the suspension point of joint in world space.See <a class="el" href="classp_joint_pulley.html#a9a6fd4f5f82d399b51812c7d4d56cf94" title="Sets the suspension point of joint in world space.">pJointPulley::setPulleyA()</a>. <br/>
</p>
<p><span class="pin">Pulley B Reference: </span>Sets the suspension point of joint in local space by using an reference entity. The above vector gets transformed. <br/>
</p>
<p><span class="pin">Stiffness: </span>Sets how stiff the constraint is, between 0 and 1 (stiffest). See <a class="el" href="classp_joint_pulley.html#ae6d2f91c2059116c5ffed8d28aad9f50" title="Sets how stiff the constraint is, between 0 and 1 (stiffest).">pJointPulley::setStiffness()</a>. <br/>
</p>
<p><span class="pin">Distance: </span> Sets the rest length of the rope connecting the two objects.See <a class="el" href="classp_joint_pulley.html#ad07825beb77ba15c16f9510175041568" title="Sets the rest length of the rope connecting the two objects.">pJointPulley::setDistance()</a>. <br/>
</p>
<p>The distance is computed as ||(pulley0 - anchor0)|| + ||(pulley1 - anchor1)|| * ratio.</p>
<p><span class="pin">Ratio: </span>.Sets transmission ratio. See <a class="el" href="classp_joint_pulley.html#ae73054d5787bf354b08ddf63e22517e1" title="Sets transmission ratio.">pJointPulley::setRatio()</a>. <br/>
</p>
<p><span class="pin">Is Rigid: </span>.Set true if the joint also has to maintain a minimum distance, not just a maximum. See <a class="el" href="classp_joint_pulley.html#a4c67946e9542ff3c5d9b9ce4e5026f94" title="Set true if the joint also has to maintain a minimum distance, not just a maximum...">pJointPulley::setRigid()</a>. <br/>
</p>
<p><span class="pin">Collision: </span>Enables Collision. See <a class="el" href="classp_joint_pulley.html#abb3a2c04831194be0d7a2ae88439b354" title="Enables collision between both bodies.">pJointPulley::enableCollision()</a>. <br/>
</p>
<p><span class="pin">Motor: </span>Motor parameters. See <a class="el" href="classp_joint_pulley.html#a0dec8debcb1290c30c391d53e37dbe0f" title="Sets motor parameters for the joint.">pJointPulley::setMotor()</a>. <br/>
 <br/>
 <hr/>
<p><br/>
 </p>
<h3>Warning</h3>
<p>At least one body must be dynamic. <br/>
</p>
<h3>VSL : Creation </h3>
<p><br/>
 <span class="NiceCode"> </p>
<div class="fragment"><pre class="fragment"><a class="code" href="class_physic_manager.html" title="PhysicManager is a Virtools manager and acts as singleton object.">PhysicManager</a> pm = GetPhysicManager();
<a class="code" href="classp_factory.html" title="Singleton class to create physic objects.">pFactory</a> pf  = getPFactory();


<a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyA = pm.getBody(bodyARef);
<a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyB = pm.getBody(bodyBRef);

<span class="comment">//sanity check :</span>
<span class="keywordflow">if</span>(!bodyA &amp;&amp; !bodyB )
    <span class="keywordflow">return</span>;

<a class="code" href="classp_world.html" title="Class to maintain physical objects.">pWorld</a> w  = null;

<span class="comment">//bodyARef or bodyBRef can be zero. This creates a revolute constraint with the environment then.</span>
<span class="comment">//However, we need a valid world object :</span>
<span class="keywordflow">if</span>(bodyA)
{
    w = bodyA.getWorld();
}

<span class="keywordflow">if</span>(bodyB)
{
    w = bodyB.getWorld();
}


<span class="comment"></span>
<span class="comment">///////////////////////////////////////////////////////</span>
<span class="comment"></span><span class="comment">//</span>
<span class="comment">// Pickup data</span>
<span class="comment">//</span>


<span class="comment">//  Determines the suspension point A by a reference</span>

Vector pulleyAOut = pulleyA;
<span class="keywordflow">if</span>(pulleyAReference)
    pulleyAReference.Transform(pulleyAOut,pulleyA);


<span class="comment">//  Determines the suspension point B by a reference</span>
Vector pulleyBOut = pulleyB;
<span class="keywordflow">if</span>(pulleyBReference)
    pulleyBReference.Transform(pulleyBOut,pulleyB);

<span class="comment">//  we ask the world whether a pulley joint exists already amongst the both bodies, if not create one,</span>
<span class="comment">//  otherwise, modify it</span>
<a class="code" href="classp_joint.html" title="Abstract base class for the different types of joints.">pJoint</a> joint  = w.getJoint(bodyARef,bodyBRef,<a class="code" href="group___joints.html#ggadcea5be96146723d822b7db05024d881aef4a9f8766afe510da1e0665410fdac1">JT_Pulley</a>);

<a class="code" href="classp_joint_pulley.html" title="A pulley joint simulates a rope between two objects passing over 2 pulleys.">pJointPulley</a> pulleyJoint = null;

<span class="keywordflow">if</span>(!joint)
    pulleyJoint= pf.createPulleyJoint(bodyARef,bodyBRef,pulleyAOut,pulleyBOut,localAnchorA,localAnchorB);
<span class="keywordflow">else</span>
    pulleyJoint= joint.castPulley();



<span class="comment">// Modification :</span>
<span class="keywordflow">if</span>(pulleyJoint)
{

    pulleyJoint.<a class="code" href="classp_joint_pulley.html#a9a6fd4f5f82d399b51812c7d4d56cf94" title="Sets the suspension point of joint in world space.">setPulleyA</a>(pulleyAOut);
    pulleyJoint.<a class="code" href="classp_joint_pulley.html#a36a8b6fd613f8da40ec36aeb4bc6f369" title="Sets the suspension point of joint in world space.">setPulleyB</a>(pulleyBOut);

    pulleyJoint.<a class="code" href="classp_joint_pulley.html#a9fe2aecc407a92787c8e434ee2f4b688" title="Sets the attachment point of joint in bodie[0]&amp;#39;s space.">setLocalAnchorA</a>(localAnchorA);
    pulleyJoint.<a class="code" href="classp_joint_pulley.html#a9fe2aecc407a92787c8e434ee2f4b688" title="Sets the attachment point of joint in bodie[0]&amp;#39;s space.">setLocalAnchorA</a>(localAnchorB);


    pulleyJoint.<a class="code" href="classp_joint_pulley.html#abb3a2c04831194be0d7a2ae88439b354" title="Enables collision between both bodies.">enableCollision</a>(Collision);
    pulleyJoint.<a class="code" href="classp_joint_pulley.html#ae6d2f91c2059116c5ffed8d28aad9f50" title="Sets how stiff the constraint is, between 0 and 1 (stiffest).">setStiffness</a>(Stiffness);
    pulleyJoint.<a class="code" href="classp_joint_pulley.html#ae73054d5787bf354b08ddf63e22517e1" title="Sets transmission ratio.">setRatio</a>(Ratio);
    pulleyJoint.<a class="code" href="classp_joint_pulley.html#ad07825beb77ba15c16f9510175041568" title="Sets the rest length of the rope connecting the two objects.">setDistance</a>(distance);
    pulleyJoint.<a class="code" href="classp_joint_pulley.html#a4c67946e9542ff3c5d9b9ce4e5026f94" title="Set true if the joint also has to maintain a minimum distance, not just a maximum...">setRigid</a>(IsRigid);

}
</pre></div><p> </span> <br/>
</p>
<h3>VSL : Motor Modification </h3>
<p><br/>
 <span class="NiceCode"> </p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> main()
{
    <a class="code" href="class_physic_manager.html" title="PhysicManager is a Virtools manager and acts as singleton object.">PhysicManager</a> pm = GetPhysicManager();
    <a class="code" href="classp_factory.html" title="Singleton class to create physic objects.">pFactory</a> pf  = getPFactory();
    
        
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyA = pm.getBody(bodyARef);
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyB = pm.getBody(bodyBRef);


    <span class="comment">//sanity check : </span>
    <span class="keywordflow">if</span>(!bodyA &amp;&amp; !bodyB )
        <span class="keywordflow">return</span>;

    <a class="code" href="classp_world.html" title="Class to maintain physical objects.">pWorld</a> w  = null;
    
    <span class="comment">//bodyARef or bodyBRef can be zero. This creates a revolute constraint with the environment then.</span>
    <span class="comment">//However, we need a valid world object : </span>
    <span class="keywordflow">if</span>(bodyA)
    {
        w = bodyA.getWorld();
    }
    
    <span class="keywordflow">if</span>(bodyB)
    {
        w = bodyB.getWorld();
    }
    

    <span class="comment">//we retrieve a joint object : </span>
    <a class="code" href="classp_joint.html" title="Abstract base class for the different types of joints.">pJoint</a> joint  = w.getJoint(bodyARef,bodyBRef,<a class="code" href="group___joints.html#ggadcea5be96146723d822b7db05024d881a37ee076a40104ad3394dbb49468a8e46">JT_Revolute</a>);
    <span class="keywordflow">if</span>(!joint)
    <span class="keywordflow">return</span>;
    

    <span class="comment">//Virtools is not providing simple downcasts : </span>
    <a class="code" href="classp_joint_revolute.html" title="A joint which behaves in a similar way to a hinge or axle.">pJointRevolute</a> revJoint = joint.castRevolute();
    <span class="keywordflow">if</span>(!revJoint)
    <span class="keywordflow">return</span>;
    
    <span class="comment"></span>
<span class="comment">    //////////////////////////////////////////////////////</span>
<span class="comment"></span>    <span class="comment">//</span>
    <span class="comment">//</span>
    <span class="comment">//      Motor : </span>
    <span class="comment">//</span>
    <span class="comment">//</span>
    <a class="code" href="classp_motor.html" title="Describes a joint motor. Some joints can be motorized, this allows them to apply...">pMotor</a> motor;
    motor.<a class="code" href="classp_motor.html#ae06ad06616e656494e3762d3e20bdea3">targetVelocity</a> = motorTargetVelocity;
    motor.<a class="code" href="classp_motor.html#a1825dc0273363c1382e33cb674d6956f">maximumForce</a> = 100.0f;
    revJoint.<a class="code" href="classp_joint_revolute.html#a8bb8e487de30fdbe53a4b6936e63e6c7" title="Sets a motor.">setMotor</a>(motor);
        
            
}
</pre></div><p> </span> <br/>
 <br/>
</p>
<p>Is utilizing <a class="el" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> <a class="el" href="classp_world.html" title="Class to maintain physical objects.">pWorld</a> <a class="el" href="class_physic_manager.html" title="PhysicManager is a Virtools manager and acts as singleton object.">PhysicManager</a> pFactory::createJointPulley(). <a class="el" href="classp_joint_pulley.html" title="A pulley joint simulates a rope between two objects passing over 2 pulleys.">pJointPulley</a><br/>
 </p>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Feb 3 18:57:23 2010 for vtPhysX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
