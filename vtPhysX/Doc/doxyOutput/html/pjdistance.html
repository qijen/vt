<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>vtPhysX: </title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="online.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">PhysX for Virtools</a>&nbsp;&raquo&nbsp;<a class="el" href="buildingblocks.html">Building Blocks</a>&nbsp;&raquo&nbsp;<a class="el" href="joints.html">Joints</a>
  </div>
</div>
<div class="contents">
<p><br/>
 PJDistance is categorized in <a class="el" href="joints.html">Joints</a> <br/>
 <br/>
See <a href="PJDistance.cmo">PJDistance.cmo</a>.</p>
<h3>Description</h3>
<p>Apply to a <a href="Documentation.chm::/beobjects/1_ck3dentity.html">3DEntity</a><br/>
 Creates or modifies a distance joint. <br/>
 <br/>
 DOFs removed: 1<br/>
 DOFs remaining: 5<br/>
 <br/>
 </p>
<div align="center">
<img src="distanceJoint.png" alt="distanceJoint.png"/>
</div>
<p>The distance joint tries to maintain a certain minimum and/or maximum distance between two points attached to a pair of actors. It can be set to springy in order to behave like a rubber band.</p>
<p>An example for a distance joint is a pendulum swinging on a string, or in the case of a springy distance joint, a rubber band between two objects.</p>
<h3>Technical Information</h3>
<div align="center">
<img src="PJDistance.png" alt="PJDistance.png"/>
</div>
<p><span class="in">In :</span>triggers the process <br/>
 <span class="out">Out :</span>is activated when the process is completed. <br/>
 <br/>
 <span class="pin">Body B :</span>The second body. Leave blank to create a joint constraint with the world. <br/>
 <br/>
 <span class="pin">Local Anchor 0 :</span>A point in bodies a local space. See <a class="el" href="classp_joint_distance.html#a985c90bda7721e335dd7189a2e209335" title="Sets the attachment point of the joint in bodies[0] space.">pJointDistance::setLocalAnchor0()</a>. <br/>
 <br/>
 <span class="pin">Local Anchor 1 :</span>A point in bodies a local space. See <a class="el" href="classp_joint_distance.html#ac0009ebed959a6d854a623f411183d2f" title="Sets the attachment point of the joint in bodies[1] space.">pJointDistance::setLocalAnchor1()</a>. <br/>
 <br/>
 <span class="pin">Collision :</span>Enable Collision. See <a class="el" href="classp_joint_distance.html#a40e368c877057e8d831f007b361e600c" title="Enables collision between the two bodies.">pJointDistance::enableCollision()</a>. <br/>
 <br/>
</p>
<p><span class="pin">Minimum Distance :</span>The minimum rest length of the rope or rod between the two anchor points.The value must be non-zero! See <a class="el" href="classp_joint_distance.html#a130b60db1afd1b0d65c9716e361ad125" title="Sets the minimum rest length of the rope or rod between the two anchor points.">pJointDistance::setMinDistance()</a>. <br/>
 <br/>
</p>
<p><span class="pin">Maximum Distance :</span>The maximum rest length of the rope or rod between the two anchor points. The value must be non-zero! See <a class="el" href="classp_joint_distance.html#a9d01fa9c9fb93c85ecd3985e935c21e7" title="Sets the maximum rest length of the rope or rod between the two anchor points.">pJointDistance::setMaxDistance()</a>. <br/>
 <br/>
</p>
<p><span class="pin">Joint Spring: </span>The spring to make it springy. The spring.targetValue field is not used. See <a class="el" href="classp_joint_distance.html#a7faff08e1437667dda631eebf5e67002" title="Makes the joint springy.">pJointDistance::setSpring()</a>. <br/>
 <br/>
</p>
<p><span class="setting">Minimum Distance : </span>Enables parameter input for minimum distance. <br/>
 <span class="setting">Maximum Distance : </span>Enables parameter input for maximum distance. <br/>
 <span class="setting">Spring : </span>Enables parameter input for the spring. <br/>
</p>
<p><br/>
 </p>
<h3>Warning</h3>
<p>The body must be dynamic. <br/>
 <br/>
</p>
<h3>VSL : Creation </h3>
<p><br/>
 <span class="NiceCode"> </p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> main()
{
    <a class="code" href="class_physic_manager.html" title="PhysicManager is a Virtools manager and acts as singleton object.">PhysicManager</a> pm = GetPhysicManager();
    <a class="code" href="classp_factory.html" title="Singleton class to create physic objects.">pFactory</a> pf  = getPFactory();
    
        
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyA = pm.getBody(bodyARef);
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyB = pm.getBody(bodyBRef);

    <span class="comment">//sanity check : </span>
    <span class="keywordflow">if</span>(!bodyA &amp;&amp; !bodyB )
        <span class="keywordflow">return</span>;

    <a class="code" href="classp_world.html" title="Class to maintain physical objects.">pWorld</a> w  = null;
    
    <span class="comment">//bodyARef or bodyBRef can be zero. This creates a distance constraint with the environment then.</span>
    <span class="comment">//However, we need a valid world object : </span>
    <span class="keywordflow">if</span>(bodyA)
    {
        w = bodyA.getWorld();
    }
    
    <span class="keywordflow">if</span>(bodyB)
    {
        w = bodyB.getWorld();
    }
    

    <span class="comment">//we ask the world whether a joint distance exists already amongst the both bodies : </span>
    <a class="code" href="classp_joint.html" title="Abstract base class for the different types of joints.">pJoint</a> joint  = w.getJoint(bodyARef,bodyBRef,<a class="code" href="group___joints.html#ggadcea5be96146723d822b7db05024d881a1f9673aa005dc2215fc470f483c829ad">JT_Distance</a>);

    <a class="code" href="classp_joint_distance.html" title="A distance joint maintains a certain distance between two points on two bodies.">pJointDistance</a> distanceJoint = null;
    <span class="keywordflow">if</span>(!joint)
    {
        <a class="code" href="classp_spring.html" title="Describes a joint spring. The spring is implicitly integrated, so even high spring...">pSpring</a> jSpring;
        jSpring.<a class="code" href="classp_spring.html#ac78e5c9960e6369e06c58af147875422">spring</a> = springValue;
        jSpring.<a class="code" href="classp_spring.html#a56486cce1a984fea07279a411162cf16">damper</a> = springDamper;

        <span class="comment">//not used : jSpring.targetValue </span>

        distanceJoint = pf.createDistanceJoint(bodyARef,bodyBRef,localAnchor0,localAnchor1,minDistance,maxDistance,jSpring);

        <span class="keywordflow">if</span>(distanceJoint)
            distanceJoint.<a class="code" href="classp_joint_distance.html#a40e368c877057e8d831f007b361e600c" title="Enables collision between the two bodies.">enableCollision</a>(collision);
            
    }
    
}
</pre></div><p> </span> <br/>
</p>
<h3>VSL : Modifiy </h3>
<p><br/>
 <span class="NiceCode"> </p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> main()
{
    <a class="code" href="class_physic_manager.html" title="PhysicManager is a Virtools manager and acts as singleton object.">PhysicManager</a> pm = GetPhysicManager();
    <a class="code" href="classp_factory.html" title="Singleton class to create physic objects.">pFactory</a> pf  = getPFactory();
    
        
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyA = pm.getBody(bodyARef);
    <a class="code" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> bodyB = pm.getBody(bodyBRef);


    <span class="comment">//sanity check : </span>
    <span class="keywordflow">if</span>(!bodyA &amp;&amp; !bodyB )
        <span class="keywordflow">return</span>;

    <a class="code" href="classp_world.html" title="Class to maintain physical objects.">pWorld</a> w  = null;
    
    <span class="comment">//bodyARef or bodyBRef can be zero. This creates a distance constraint with the environment then.</span>
    <span class="comment">//However, we need a valid world object : </span>
    <span class="keywordflow">if</span>(bodyA)
    {
        w = bodyA.getWorld();
    }
    
    <span class="keywordflow">if</span>(bodyB)
    {
        w = bodyB.getWorld();
    }
    

    <span class="comment">//we retrieve a joint object : </span>
    <a class="code" href="classp_joint.html" title="Abstract base class for the different types of joints.">pJoint</a> joint  = w.getJoint(bodyARef,bodyBRef,<a class="code" href="group___joints.html#ggadcea5be96146723d822b7db05024d881a1f9673aa005dc2215fc470f483c829ad">JT_Distance</a>);
    <span class="keywordflow">if</span>(!joint)
    <span class="keywordflow">return</span>;

    <span class="comment">//Virtools is not providing simple downcasts : </span>
    <a class="code" href="classp_joint_distance.html" title="A distance joint maintains a certain distance between two points on two bodies.">pJointDistance</a> distanceJoint = joint.castDistanceJoint();
    <span class="keywordflow">if</span>(!distanceJoint)
    <span class="keywordflow">return</span>;
    
    distanceJoint.<a class="code" href="classp_joint_distance.html#a130b60db1afd1b0d65c9716e361ad125" title="Sets the minimum rest length of the rope or rod between the two anchor points.">setMinDistance</a>(minDistance);
        
}
</pre></div><p> </span> <br/>
 <br/>
 <br/>
</p>
<p>Is utilizing <a class="el" href="classp_rigid_body.html" title="pRigidBody is the main simulation object in the physics SDK.">pRigidBody</a> <a class="el" href="classp_world.html" title="Class to maintain physical objects.">pWorld</a> <a class="el" href="class_physic_manager.html" title="PhysicManager is a Virtools manager and acts as singleton object.">PhysicManager</a> pFactory::createDistanceJoint().<br/>
 </p>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Feb 3 18:57:23 2010 for vtPhysX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
